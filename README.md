# cloud-computing-lab-4-solved
**TO GET THIS SOLUTION VISIT:** [Cloud Computing Lab 4 Solved](https://mantutor.com/product/cloud-computing-aoec-lab4-solved/)


---

**For Custom/Order Solutions:** **Email:** mantutorcodes@gmail.com  

*We deliver quick, professional, and affordable assignment help.*

---

<h2>Description</h2>



<div class="kk-star-ratings kksr-auto kksr-align-center kksr-valign-top" data-payload="{&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:&quot;113895&quot;,&quot;slug&quot;:&quot;default&quot;,&quot;valign&quot;:&quot;top&quot;,&quot;ignore&quot;:&quot;&quot;,&quot;reference&quot;:&quot;auto&quot;,&quot;class&quot;:&quot;&quot;,&quot;count&quot;:&quot;1&quot;,&quot;legendonly&quot;:&quot;&quot;,&quot;readonly&quot;:&quot;&quot;,&quot;score&quot;:&quot;5&quot;,&quot;starsonly&quot;:&quot;&quot;,&quot;best&quot;:&quot;5&quot;,&quot;gap&quot;:&quot;4&quot;,&quot;greet&quot;:&quot;Rate this product&quot;,&quot;legend&quot;:&quot;5\/5 - (1 vote)&quot;,&quot;size&quot;:&quot;24&quot;,&quot;title&quot;:&quot;Cloud Computing Lab 4 Solved&quot;,&quot;width&quot;:&quot;138&quot;,&quot;_legend&quot;:&quot;{score}\/{best} - ({count} {votes})&quot;,&quot;font_factor&quot;:&quot;1.25&quot;}">

<div class="kksr-stars">

<div class="kksr-stars-inactive">
            <div class="kksr-star" data-star="1" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" data-star="2" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" data-star="3" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" data-star="4" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" data-star="5" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
    </div>

<div class="kksr-stars-active" style="width: 138px;">
            <div class="kksr-star" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
    </div>
</div>


<div class="kksr-legend" style="font-size: 19.2px;">
            5/5 - (1 vote)    </div>
    </div>
1. Overview

åœ¨ Lab 2 ä¸ï¼Œæˆ‘ä»¬å®Œæˆäº†ä¸€ä¸ªç®€åŒ–çš„ HTTP/1.1 Web æœåŠ¡å™¨ï¼› åœ¨ Lab 3 ä¸ï¼Œæˆ‘ä»¬å®Œæˆäº†ä¸€ä¸ªç®€åŒ–çš„ åˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿã€‚ çŽ°åœ¨è®©æˆ‘ä»¬å°è¯•å°†ä¸¤è€…ç»„åˆå¹¶å®Œå–„ï¼Œæž„å»ºä¸€ä¸ªé«˜æ€§èƒ½çš„åˆ†å¸ƒå¼é€‰è¯¾ç³»ç»Ÿã€‚ æˆ‘ä»¬çš„ç›®æ ‡ï¼š

è¿ç”¨è¯¾ç¨‹çŸ¥è¯†ä¸Žè¿‡åŽ»çš„å®žéªŒé¡¹ç›®ï¼Œæž„å»ºä¸€ä¸ªåˆ†å¸ƒå¼é€‰è¯¾ç³»ç»Ÿ å¦ä¹ å¦‚ä½•æé«˜ä¸€ä¸ªç³»ç»Ÿçš„å¥å£®æ€§å’Œå¯æ‰©å±•æ€§ï¼Œå°½å¯èƒ½æå‡å…¶æ€§èƒ½

æ³¨æ„ï¼šå¦‚æžœä½ é€‰æ‹©å®Œæˆ Lab 4ï¼Œé‚£ä¹ˆå°†ä¸å†éœ€è¦å®Œæˆ Lab 3ï¼Œå› ä¸º Lab 4 å·²ç»æ¶µç›–äº† Lab 3 çš„è¦æ±‚ï¼Œå…¶ä¸æ•°æ®åº“æ–¹é¢çš„è¦æ±‚ï¼Œè¯·æŸ¥çœ‹Lab3ï¼Œæˆ‘ä»¬ä¼šæ ¹æ®ä½ çš„ Lab 4 å®Œæˆæƒ…å†µå¯¹ Lab 3 è¿›è¡Œæ‰“åˆ†ã€‚

2. Background

ä½ æ‰€éœ€è¦çš„æœ‰å…³ Http Server ä¸Ž Distributed Database çš„åŸºç¡€çŸ¥è¯†éƒ½åœ¨è¿‡åŽ»çš„å®žéªŒä¸ï¼Œå¦‚æžœä½ å¿˜è®°äº†æˆ–è€… æƒ³è¦å¤ä¹ ï¼Œå¯ä»¥é‡æ–°æŸ¥çœ‹Â Lab 2Â å’ŒÂ Lab ã€‚ Dividing databases

éšç€è¿‘äº›å¹´ä¿¡æ¯åŒ–å¤§å‘å±•ï¼Œè¶Šæ¥è¶Šå¤šçš„æ•°æ®å˜å…¥äº†æ•°æ®åº“ä¸ï¼Œè€Œç‰©ç†æœåŠ¡å™¨çš„CPUã€å†…å˜ã€å˜å‚¨ã€è¿žæŽ¥æ•°ç‰èµ„æºæ˜¯æœ‰é™çš„ï¼ŒæŸä¸ªæ—¶æ®µå¤§é‡è¿žæŽ¥åŒæ—¶æ‰§è¡Œæ“ä½œï¼Œä¼šå¯¼è‡ ´æ•°æ®åº“åœ¨å¤„ç†ä¸Šé‡åˆ°æ€§èƒ½ç“¶é¢ˆã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¡Œä¸šå…ˆé©±é—¨å……

åˆ†å‘æ‰¬äº†åˆ†è€Œæ²»ä¹‹çš„æ€æƒ³ï¼Œå¯¹å¤§è¡¨è¿›è¡Œåˆ†å‰²ï¼Œç„¶åŽå®žæ–½æ›´å¥½çš„æŽ§åˆ¶å’Œç®¡ç†ï¼ŒåŒæ—

¶ä½¿ç”¨å¤šå°æœºå™¨çš„CPUã€å†…å˜ã€å˜å‚¨ï¼Œæä¾›æ›´å¥½çš„æ€§èƒ½ã€‚

å…¶ä¸ä¸€ç§ç®€å•çš„é€»è¾‘åˆ†å‰²æ˜¯åž‚ç›´åˆ†åº“ã€‚æ¯”å¦‚æˆ‘ä»¬çš„æ•°æ®åº“ä¸‐

æœ‰å•†å“è¡¨Productsã€è¿˜æœ‰å¯¹è®¢å•è¡¨Ordersï¼Œè¿˜æœ‰ç§¯åˆ†è¡¨Scoresã€‚æŽ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºä¸‰ä¸ªæ•°æ®åº“ï¼Œä¸€ä¸ªæ•°æ®åº“å‐

˜æ”¾å•†å“ï¼Œä¸€ä¸ªæ•°æ®åº“å˜æ”¾è®¢å•ï¼Œä¸€ä¸ªæ•°æ®åº“å˜æ”¾ç§¯åˆ†ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

è¿™æ ·åšæœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜ç‚¹ï¼š

è·Ÿéšä¸šåŠ¡è¿›è¡Œåˆ†å‰²ï¼Œå’Œæœ€è¿‘æµè¡Œçš„å¾®æœåŠ¡æ¦‚å¿µç›¸ä¼¼ï¼Œæ–¹ä¾¿è§£è€¦ä¹‹åŽçš„ç®¡ç†åŠæ‰©å±•ã€‚ é«˜å¹¶å‘çš„åœºæ™¯ä¸‹ï¼Œåž‚ç›´æ‹†åˆ†ä½¿ç”¨å¤šå°æœåŠ¡å™¨çš„CPUã€I/Oã€å†…å˜èƒ½æå‡æ€§èƒ½ï¼ŒåŒæ—

¶å¯¹å•æœºæ•°æ®åº“è¿žæŽ¥æ•°ã€ä¸€äº›èµ„æºé™åˆ¶ä¹Ÿå¾—åˆ°äº†æå‡ã€‚ èƒ½å®žçŽ°å†·çƒæ•°æ®çš„åˆ†ç¦»ã€‚

å½“ç„¶ï¼Œåˆ†åº“åˆ†è¡¨åœ¨å®žé™…åº”ç”¨ä¸æ˜¯ä¸€ä¸ªååˆ†å¤æ‚çš„è®¾è®¡ï¼Œåœ¨ä½Žå¹¶å‘çš„åº”ç”¨ç¨‹åºä¸‐

ï¼Œåˆ†åº“åˆ†è¡¨çš„æ•ˆæžœå¹¶ä¸æ˜Žæ˜¾ï¼Œå› æ¤éœ€è¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œå¹¶å‘æ‰¿è½½èƒ½åŠ›ç‰ç»¼åˆè€ƒè™‘ã€‚ä¸ºäº†ç®€åŒ– è¿™ä¸€è¿‡ç¨‹ï¼Œåœ¨å®žéªŒä¸ï¼Œæˆ‘ä»¬ä»…è¦æ±‚å¯¹æ•°æ®è¿›è¡Œåž‚ç›´åˆ†åº“ï¼Œå³å°†è¯¾ç¨‹æ•°æ®å’Œå¦ç”Ÿä¿¡æ¯åˆ†åˆ«å˜å‚¨åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸ï¼Œä»¥æ¤æ¥å®žçŽ°è¯¾ç¨‹æ•°æ®è®¿é—®å’Œå¦ç”Ÿä¿¡æ¯è®¿é—®äº’ä¸å½±å“çš„æ•ˆæžœã€‚ Load Balancing

è´Ÿè½½å¹³è¡¡ï¼ˆè‹±è¯ï¼šload balancingï¼‰æ˜¯ä¸€ç§ç”µåè®¡ç®—æœºæŠ€æœ¯ï¼Œç”¨æ¥åœ¨å¤šä¸ªè®¡ç®—æœºï¼ˆè®¡ç®—

æœºé›†ç¾¤ï¼‰ã€ç½‘ç»œè¿žæŽ¥ã€CPUã€ç£ç›˜é©±åŠ¨å™¨æˆ–å…¶ä»–èµ„æºä¸åˆ†é…è´Ÿè½½ï¼Œä»¥è¾¾åˆ°ä¼˜åŒ–èµ„æºä½¿ç”¨ã€æœ€å¤§åŒ– åžåçŽ‡ã€æœ€å°åŒ–å“åº”æ—¶é—´ã€åŒæ—¶é¿å…è¿‡è½½çš„ç›®çš„ã€‚ ä½¿ç”¨å¸¦æœ‰è´Ÿè½½å¹³è¡¡çš„å¤šä¸ªæœåŠ¡å™¨ç»„ä»¶ï¼Œå– ä»£å•ä¸€çš„ç»„ä»¶ï¼Œå¯ä»¥é€šè¿‡å†—ä½™æé«˜å¯é æ€§ã€‚è´Ÿè½½å¹³è¡¡æœåŠ¡é€šå¸¸æ˜¯ç”±ä¸“ç”¨è½¯ä»¶å’Œç¡¬ä»¶æ¥å®Œæˆã€‚

ä¸»è¦ä½œç”¨æ˜¯å°†å¤§é‡ä½œä¸šåˆç†åœ°åˆ†æ‘Šåˆ°å¤šä¸ªæ“ä½œå•å…ƒä¸Šè¿›è¡Œæ‰§è¡Œï¼Œç”¨äºŽè§£å†³äº’è”ç½‘æž¶æž„ä¸çš„é«˜å¹¶å‘å’Œé«˜å¯ç”¨çš„é

—®é¢˜ã€‚

è´Ÿè½½å‡è¡¡æœ€é‡è¦çš„ä¸€ä¸ªåº”ç”¨æ˜¯åˆ©ç”¨å¤šå°æœåŠ¡å™¨æä¾›å•ä¸€æœåŠ¡ï¼Œå¯¹äºŽäº’è”ç½‘æœåŠ¡ï¼Œè

´Ÿè½½å¹³è¡¡å™¨é€šå¸¸æ˜¯ä¸€ä¸ªè½¯ä»¶ç¨‹åºï¼Œè¿™ä¸ªç¨‹åºä¾¦å¬ä¸€ä¸ªå¤–éƒ¨ç«¯å£ï¼Œäº’è”ç½‘ç”¨æˆ·å¯ä»¥é€šè¿‡è¿™ä¸ªç«¯å£æ¥è®¿é—

®æœåŠ¡ï¼Œè€Œä½œä¸ºè´Ÿè½½å¹³è¡¡å™¨çš„è½¯ä»¶ä¼šå°†ç”¨æˆ·çš„è¯·æ±‚è½¬å‘ç»™åŽå°å†…ç½‘æœåŠ¡å™¨ï¼Œå†…

ç½‘æœåŠ¡å™¨å°†è¯·æ±‚çš„å“åº”è¿”å›žç»™è´Ÿè½½å¹³è¡¡å™¨ï¼Œè´Ÿè½½å¹³è¡¡å™¨å†å°†å“åº”å‘é€åˆ°ç”¨æˆ·ï¼Œè¿™æ ·å°±å‘äº’è”ç½‘ç”¨æˆ·éšè—äº†å†… ç½‘ç»“æž„ï¼Œé˜»æ¢äº†ç”¨æˆ·ç›´æŽ¥è®¿é—®åŽå°ï¼ˆå†…ç½‘ï¼‰æœåŠ¡å™¨ï¼Œä½¿å¾—æœåŠ¡å™¨æ›´åŠ å®‰å…¨ï¼Œå¯ä»¥é˜»æ‐

¢å¯¹æ ¸å¿ƒç½‘ç»œæ ˆå’Œè¿è¡Œåœ¨å…¶å®ƒç«¯å£æœåŠ¡çš„æ”»å‡»ã€‚

å½“æ‰€æœ‰åŽå°æœåŠ¡å™¨å‡ºçŽ°æ•…éšœæ—¶ï¼Œæœ‰äº›è´Ÿè½½å¹³è¡¡å™¨ä¼šæä¾›ä¸€äº›ç‰¹æ®Šçš„åŠŸèƒ½æ¥å¤„ç†è¿™ç§æƒ… å†µã€‚ä¾‹å¦‚è½¬å‘è¯·æ±‚åˆ°ä¸€ä¸ªå¤‡ç”¨çš„è´Ÿè½½å¹³è¡¡å™¨ã€æ˜¾ç¤ºä¸€æ¡å…³äºŽæœåŠ¡ä¸æ–çš„æ¶ˆæ¯ç‰ã€‚è´Ÿè½½å¹³è¡¡å™¨ä½¿å¾— ITå›¢é˜Ÿå¯ä»¥æ˜¾è‘—æé«˜å®¹é”™èƒ½åŠ›ã€‚å®ƒå¯ä»¥è‡ªåŠ¨æä¾›å¤§é‡çš„å®¹é‡ä»¥å¤„ç†ä»»ä½•åº”ç”¨ç¨‹åºæµé‡çš„å¢žåŠ æˆ–å‡å°‘ã€‚ ä¸ºäº†æ›´å¥½çš„å®žçŽ°è´Ÿè½½å‡è¡¡å™¨ï¼Œä½ å¯èƒ½éœ€è¦é€‰æ‹©ä¸€ç§æˆ–å‡ ç§åˆé€‚çš„è°ƒåº¦ç®—æ³•ã€‚

Basic Version

åœ¨ basic ç‰ˆæœ¬ä¸ï¼Œä½ åªéœ€è¦è¿è¡Œä¸€ä¸ª Web æœåŠ¡å™¨ï¼Œä¸Žå…¶ç›¸è¿žçš„æ˜¯å¤šä¸ªå˜å‚¨å™¨é›†ç¾¤ã€‚ å¯¹äºŽWebæœåŠ¡å™¨ï¼Œæˆ‘ä»¬è¦æ±‚ï¼šæ”¯æŒé«˜å¹¶å‘ï¼Œå¯ä»¥åŒæ—¶å“åº”å¤šä¸ªå®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚ã€‚ å¯¹äºŽå˜å‚¨å™¨é›†ç¾¤ï¼Œæˆ‘ä»¬è¦æ±‚ï¼šé›†ç¾¤æ•°é‡ä¸å°äºŽ2ï¼Œå•ä¸ªé›†ç¾¤ä¹‹é—´çš„é€šä¿¡å¯ä»¥ä½¿ç”¨ 2PC æˆ– RAFT åè®®å®žçŽ°ã€‚

å½“å˜å‚¨å™¨é›†ç¾¤æ•°é‡å¢žå¤šæ—¶ï¼Œä½ å¯ä»¥å¯¹å˜å‚¨çš„æ•°æ®è¿›è¡Œåˆ†åº“å˜å‚¨ï¼Œå¦‚è¯¾ç¨‹ä¸çš„æ•°æ®å¯ä»¥å˜å‚¨åœ¨ Cluster 1 ä¸ï¼Œè€Œå¦ç”Ÿä¸ªäººä¿¡æ¯ç›¸å…³çš„æ•°æ®å¯ä»¥å˜å‚¨åœ¨ Cluster 2 ä¸ã€‚ Advanced Version

åœ¨advanceç‰ˆæœ¬ä¸ï¼Œä½ éœ€è¦è¿è¡Œä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨ï¼Œå¤šä¸ªWebæœåŠ¡å™¨ä»¥åŠå¤šä¸ªå˜å‚¨å™¨é›†ç¾¤ã€‚

å¯¹äºŽè´Ÿè½½å‡è¡¡å™¨ï¼Œæˆ‘ä»¬è¦æ±‚ï¼šæ”¯æŒé«˜å¹¶å‘ï¼Œèƒ½å¤ŸåŠ¨æ€åœ°é€‰æ‹©æ

´»è·ƒå¹¶ä¸”å¯ç”¨çš„WebæœåŠ¡å™¨ï¼Œå°†è¯·æ±‚å‘é€è‡³ç›¸åº”èŠ‚ç‚¹è¿›è¡Œå¤„ç†ã€‚ å¯¹äºŽWebæœåŠ¡å™¨å’Œå˜å‚¨å™¨é›†ç¾¤ï¼Œæˆ‘ä»¬è¦æ±‚ç‰åŒäºŽBasicç‰ˆæœ¬ã€‚

4. Standardized Format

ä¸ºäº†æ›´å¥½çš„è¿›è¡Œæµ‹è¯•ä¸Žè¯„é˜…ï¼Œæˆ‘ä»¬å°†å¯¹å®žéªŒè¿‡ç¨‹ä¸çš„ä¸€äº›æ•°æ®æ ¼å¼è¿›è¡Œæ ‡å‡†è§„å®šï¼Œè¯·ç¡®ä¿ä½ å®žçŽ°çš„æœ€ç»ˆç³»ç»Ÿåœ¨è¿™äº›å¯¹å¤–æŽ¥å£ä¸Šæ˜¯æˆ‘ä»¬çš„æ ‡å‡†ä¸€è‡´çš„ã€‚

åœ¨è¯·æ±‚ä½“å’Œå“åº”ä½“ä¸ï¼Œæˆ‘ä»¬é‡‡ç”¨JSONæ ¼å¼è¿›è¡Œé€šä¿¡ã€‚è¯·æ±‚ä½“æ ¹æ®è¯·æ±‚å†…å®¹å†³å®šï¼Œè€Œå“åº”ä½“åŒ… å«äº†ç‰¹å®šçš„æ•°æ®ç»“æž„ï¼Œåˆ†åˆ«ä¸ºcodeï¼Œdataå’Œmsgã€‚å…¶ä¸codeè¡¨ç¤ºçŠ¶æ€ç ï¼Œ200ä¸ºæ£å¸¸å“åº”ï¼Œå…¶ä»– ä¸ºé”™è¯¯å“åº”ï¼Œå¯ä»¥æ ¹æ®å®žé™…æƒ…å†µè¿”å›žä¸åŒçš„éžé›¶å€¼ã€‚dataè¡¨ç¤ºå“åº”å¯¹è±¡ï¼Œé‡Œé¢åŒ…å«å“åº”ç»“æžœï¼Œé”™è¯¯æƒ… å†µä¸‹ä¸ºç©ºã€‚msgè¡¨ç¤ºå“åº”æ¶ˆæ¯ï¼Œæ£å¸¸æƒ…å†µä¸‹ä¸€èˆ¬ä¸ºokï¼Œé”™è¯¯æƒ…å†µä¸‹æ ¹æ®å®žé™…å€¼è¿”å›žé”™è¯¯æ¶ˆæ¯ã€‚

é™¤äº†ç‰¹å®šçš„Â apiÂ ä¹‹å¤–ï¼ŒWeb æœåŠ¡å™¨ä»éœ€è¦æ”¯æŒé™æ€æ–‡ä»¶è®¿é—®ç‰åŸºæœ¬åŠŸèƒ½ï¼ˆå¦‚æ”¯æŒæ˜¾ç¤º html é¡µé¢ï¼Œéžæ³• path è¿”å›ž 404 é¡µé¢ç‰ï¼‰ï¼Œåœ¨æ¤ç•¥åŽ»ä»‹ç»ï¼Œå…·ä½“ä¿¡æ¯å¯å‚è€ƒ Lab 2ã€‚

æˆ‘ä»¬å¯¹Â apiÂ çš„è®¾è®¡è¿›è¡Œäº†éžå¸¸å¤šçš„ç®€åŒ–ï¼ŒçŽ°å®žä¸å°†ä¼šè¿œæ¯”å®ƒä»¬å¤æ‚ï¼Œä½ å¯ä»¥ä½¿ç”¨è¦æ±‚ä»¥å¤–çš„ path æ‰©å±•ä½ çš„ç³»ç»Ÿï¼Œå¦‚ï¼šä½ å¯ä»¥è‡ªè¡Œè®¾è®¡æŠ¥é”™ä¿¡æ¯ã€‚

4.1 Web Server

ä¸€ä¸ªå®Œæ•´çš„é€‰è¯¾ç³»ç»Ÿéœ€è¦åŒ…å«ä¼—å¤šåŠŸèƒ½ï¼Œä¸ºäº†é™ä½Žå¤æ‚æ€§ï¼Œæˆ‘ä»¬å°†å…¶æŠ½è±¡ä¸ºæŸ¥è¯¢è¯¾ç¨‹ï¼Œé€‰ä¸è¯¾ç¨‹å’Œé€€é€‰è¯¾ç¨‹è¿™å‡ ä¸ªæ¨¡å—ã€‚

1. /api/search/course

ä»‹ç»ï¼šä¸»è¦ç”¨äºŽæŸ¥è¯¢è¯¾ç¨‹ä¿¡æ¯ï¼Œç›¸å…³çš„å‚æ•°ä½¿ç”¨Â query æºå¸¦ï¼ŒæŸ¥è¯¢åŽç»™å‡ºçš„æ•°æ®è‡³å°‘éœ€è¦åŒ… å«è¯¾ç¨‹çš„ ç¼–å·ï¼Œåç§°ï¼Œå®¹é‡å’Œå·²é€‰äººæ•°ã€‚ æ–¹æ³•ï¼šGET

å‚æ•°ï¼šid=[course_id] è¯¾ç¨‹ç¼–å·ä»…ç”±Â [a-zA-Z0-9]ç»„æˆï¼Œä¸å«æœ‰ç‰¹æ®Šå—ç¬¦ã€‚ å“åº”ä½“ï¼š

json { “code”: 200, “data”: { “id”: course_id, // è¯¾ç¨‹id “name”: course_name , // è¯¾ç¨‹ “capacity”: capacity , // è¯¾ç¨‹å®¹é‡ “selected”: selected // å·²é€‰äººæ•° }, “msg”: “ok” }

1. /api/search/all

ä»‹ç»ï¼šä¸ŽæŸ¥è¯¢å•ä¸ªè¯¾ç¨‹ç±»ä¼¼ï¼Œä½†å…¶Â dataå—æ®µçš„å€¼ä»Žå•ä¸ªè¯¾ç¨‹ä¿¡æ¯å˜ä¸ºäº†åŒ… å«æ‰€æœ‰è¯¾ç¨‹ä¿¡æ¯çš„æ•°ç»„ã€‚ æ–¹æ³•ï¼šGET

å“åº”ä½“ï¼š

json { “code”: 200, “data”: [{ “id”: course_id, // è¯¾ç¨‹id “name”: course_name , // è¯¾ç¨‹ “capacity”: capacity

, // è¯¾ç¨‹å®¹é‡ “selected”: selected // å·²é€‰äººæ•° },{ “id”: course_id, “name”: course_name , // è¯¾ç¨‹ “capacity”: capacity , // è¯¾ç¨‹å®¹é‡ “selected”: selected // å·²é€‰äººæ•° }, … ], “msg”: “ok” }

1. /api/search/student ä»‹ç»ï¼šä¸»è¦ç”¨äºŽæŸ¥è¯¢å¦ç”Ÿæ‰€é€‰è¯¾ç¨‹ä¿¡æ¯ï¼Œç›¸å…³çš„å‚æ•°ä½¿ç”¨Â query æºå¸¦ æ–¹æ³•ï¼šGET

å‚æ•°ï¼šstuid=[student_id] å¦ç”Ÿå¦å·ä»…ç”±Â [a-zA-Z0-9]ç»„æˆï¼Œä¸å«æœ‰ç‰¹æ®Šå—ç¬¦ã€‚ å“åº”ä½“ï¼š

json { “code”: 200, “data”: { “stuid”: student_id, // å¦å· “name”: student_name , // å¦ç”Ÿå§“å “course”: [{ // å‐

¦ç”Ÿé€‰çš„è¯¾ç¨‹æ•°ç»„ “id”: course_id, “name”: course_name , // è¯¾ç¨‹ },{ “id”: course_id, “name”: course_name

, // è¯¾ç¨‹ }, … ] }, “msg”: “ok” } å¦‚æžœå¦ç”Ÿæœªé€‰è¯¾ç¨‹ï¼ŒÂ data.course = []å³å¯ã€‚

1. /api/choose ä»‹ç»ï¼šä¸»è¦ç”¨äºŽè¿›è¡Œé€‰è¯¾æ“ä½œï¼Œç›¸å…³çš„å‚æ•°ä½¿ç”¨Â http request bodyæºå¸¦ æ–¹æ³•ï¼šPOST è¯·æ±‚ä½“ï¼š json { “stuid”: student_id, // å¦ç”Ÿå¦å· “course_id”: course_id // è¯¾ç¨‹ç¼–å· } å½“éœ€è¦è¿›è¡Œé€‰è¯¾æ“ä½œæ—¶ï¼ŒpayloadÂ åº”è‡³å°‘åŒ…å« å¦ç”Ÿå¦å·ï¼Œè¯¾ç¨‹ç¼–å·ã€‚ å“åº”ä½“ï¼š json { “code”: 200, “data”: [], “msg”: “ok” } å¯¹äºŽ payload æ ¼å¼æˆ–æ•°æ®éžæ³•ï¼Œæ— æ³•æŸ¥è¯¢åˆ°ç›¸å…³ä¿¡æ¯ï¼Œè¯¾ç¨‹å·²æ»¡ ç‰é”™è¯¯æƒ… å†µï¼Œè¿”å›žåŒ…å«é”™è¯¯ä¿¡æ¯çš„ JSON å¯¹è±¡å³å¯ã€‚

1. /api/drop ä»‹ç»ï¼šä¸»è¦ç”¨äºŽè¿›è¡Œé€€é€‰æ“ä½œï¼Œç›¸å…³çš„å‚æ•°ä½¿ç”¨Â http request bodyæºå¸¦ æ–¹æ³•ï¼šPOST è¯·æ±‚ä½“ï¼š json { “stuid”: student_id, // å¦ç”Ÿå¦å· “course_id”: course_id // è¯¾ç¨‹ç¼–å· } å½“éœ€è¦è¿›è¡Œé€‰è¯¾æ“ä½œæ—¶ï¼ŒpayloadÂ åº”è‡³å°‘åŒ…å« å¦ç”Ÿå¦å·ï¼Œè¯¾ç¨‹ç¼–å·ã€‚ å“åº”ä½“ï¼š json { “code”: 200, “data”: [], “msg”: “ok” } å¯¹äºŽ payload æ ¼å¼æˆ–æ•°æ®éžæ³•ï¼Œæ— æ³•æŸ¥è¯¢åˆ°ç›¸å…³ä¿¡æ¯ï¼Œè¯¥å¦ç”Ÿæ²¡æœ‰é€‰æ‹©è¿™é—¨è¯¾ç‰é”™è¯¯æƒ…å†µï¼Œè¿”å›žåŒ…å«é”™è¯¯ä¿¡æ¯çš„ JSON å¯¹è±¡å³å¯ã€‚

4.2 Store Server

Command Lines Arguments

ç”±äºŽæˆ‘ä»¬ç³»ç»Ÿä½¿ç”¨äº†é»˜è®¤æ•°æ®ï¼Œæ‰€ä»¥ä½ çš„å˜å‚¨å™¨åº”è¯¥åœ¨å¯åŠ¨æ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡Œè¯»å–ã€‚ é»˜è®¤æ•°æ®å¯ä»¥åœ¨Â data/Â æ–‡ä»¶å¤¹ä¸æ‰¾åˆ°ã€‚ å…¶ä½™è¯´æ˜Žè¯·å‚è€ƒ Lab 3ã€‚ Database Tables

æ•°æ®åº“çš„åŸºç¡€æ ¼å¼æ˜¯å…³ç³»åž‹æ•°æ®åº“ï¼Œä½ ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦å¢žæ·»ä¿®æ”¹æ•°æ®çš„ç±»åž‹ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©è®¾è®¡æ– °ç±»åž‹çš„æ•°æ®åº“ï¼Œä½†å¿…é¡»ä¿è¯é€šè¿‡æ•°æ®åº“å¯ä»¥æ£å¸¸å®Œæˆéœ€è¦çš„åŠŸèƒ½ã€‚ é»˜è®¤æ•°æ®å¯ä»¥åœ¨Â data/Â æ–‡ä»¶å¤¹ä¸æ‰¾åˆ°ã€‚

Course

| id(key) – string | name – string | capacity – int | selected – int | | — | — | — | — | | “CS06142” | “äº‘è®¡ç®—æŠ€æœ¯” | 120 | 120 |

Student

| id(key) – string | name – string | | — | — | | “211926010111” | “å¼ ä¸‰” |

Course Selection

| Course id – string | Student id – string | | — | — | | “CS06142” | “211926010111” |

Commands

æ£å¸¸æƒ…å†µä¸‹ï¼Œç”¨æˆ·è®¿é—®æ•°æ®ä»…é€šè¿‡å‰ç«¯çš„ HTTP Web æœåŠ¡å™¨ï¼Œè€Œæ•°æ®æŸ¥è¯¢ç”± Web æœåŠ¡å™¨ä¸Žæ•°æ®åº“é›†ç¾¤è¿›è¡Œäº¤äº’ã€‚ ä»¥ä¸‹ç»™å‡ºçš„æ•°æ®åº“å‘½ä»¤ä»…ä¾›å‚è€ƒï¼Œä½ å¯ä»¥é€‰æ‹©è‡ªå·±å®žçŽ°ä¸€ä¸ªæ»¡è¶³ç›¸åŒåŸºæœ¬åŠŸèƒ½çš„å‘½ä»¤é›†ã€‚ Check Courses Capacity

å‘é€Â GET Course [course id], e.g.,Â GET Course CS06142ï¼› è¿”å›žÂ [course id] [course name] [course capacity] [selected number], e.g.,Â CS06142 äº‘è®¡ç®—æŠ€æœ¯ 120 120 ç‰¹åˆ«çš„ï¼Œå¯ä»¥ä¸€æ¬¡æŸ¥è¯¢æ‰€æœ‰çš„è¯¾ç¨‹æœ€å¤§å®¹é‡ä¿¡æ¯:

å‘é€Â GET Course all, e.g.,Â GET Course allï¼›

è¿”å›žÂ å¤šè¡ŒÂ [course id] [course name] [course capacity] [selected number], e.g.,Â CS04008 è®¡ç®—æœºç½‘ç»œ 90 80 CS06142 äº‘è®¡ç®—æŠ€æœ¯ 120 120ã€‚

Check Student Selected Courses å‘é€Â GET Student Courses [student id], e.g.,Â GET Student Courses 211926010111ï¼› è¿”å›žÂ å¤šè¡ŒÂ [course id] [course name], e.g.,Â CS04008 è®¡ç®—æœºç½‘ç»œ CS06142 äº‘è®¡ç®—æŠ€æœ¯ã€‚ Choose a Course

å‘é€Â ADD Student Course [student id] [course id], e.g.,Â ADD Student Course 211926010111 CS06142ï¼› å¦‚æžœæˆåŠŸï¼Œè¿”å›žÂ +OK; å¦‚æžœå¤±è´¥ï¼Œè¿”å›žÂ -ERRORã€‚ Drop a Course

å‘é€Â DEL Student Course [student id] [course id], e.g.,Â DEL Student Course 211926010111 CS06142ï¼› å¦‚æžœæˆåŠŸï¼Œè¿”å›žÂ +OK; å¦‚æžœå¤±è´¥ï¼Œè¿”å›žÂ -ERRORã€‚

4.3 Load Balancer

ä¸ºäº†æ›´å¥½åœ°ç»Ÿä¸€æµ‹è¯•ï¼Œæˆ‘ä»¬éœ€è¦ä½ çš„è´Ÿè½½å‡è¡¡å™¨é‡‡ç”¨æ ‡å‡†çš„é…ç½®æ–

‡ä»¶å¯åŠ¨ï¼Œä¾‹å¦‚ï¼Œä½ å¯ä»¥è¿™æ ·å°†æ‰€æœ‰çš„WebæœåŠ¡çš„åœ°å€å’Œç«¯å£ä¼ ç»™è´Ÿè½½å‡è¡¡å™¨ï¼Œç”±è ´Ÿè½½å‡è¡¡å™¨åŠ¨æ€çš„è½¬å‘è¯·æ±‚åˆ°è¿™äº›WebæœåŠ¡ä¸Šï¼š

“`

web_servers.conf æ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ªå†… éƒ¨webæœåŠ¡è¿›ç¨‹çš„ç›‘å¬åœ°å€å’Œç«¯å£

127.0.0.1 8081 127.0.0.1 8082 127.0.0.1 8083 127.0.0.1 8084 “`

5. Test

é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†åœ¨ Linux Ubuntu 20.04 x64 æœåŠ¡å™¨è¿›è¡Œæµ‹è¯•ã€‚ æˆ‘ä»¬é¢„æœŸçš„æµ‹è¯•å’Œè¯„åˆ†é¡¹ç›®æœ‰ï¼š

APIåŠŸèƒ½å®žçŽ°ï¼šä¸Šè¿°æ¯ä¸ªAPIå‡ä¸º1åˆ†ï¼ˆ5åˆ†ï¼‰

å˜å‚¨èŠ‚ç‚¹å®¹ç¾æµ‹è¯•ï¼šéšæœºç»ˆæ¢å˜å‚¨èŠ‚ç‚¹æœåŠ¡ï¼ŒæŽ¥å£è¿è¡Œæƒ…å†µï¼ˆ3åˆ†ï¼‰

è´Ÿè½½å‡è¡¡å®žçŽ°ï¼šé€šè¿‡è´Ÿè½½å‡è¡¡å™¨å¯¹å¤–æä¾›æŽ¥å£æœåŠ¡ï¼Œå¹¶ä¸”WebæœåŠ¡èƒ½å¤Ÿå®¹ç¾ï¼ˆ1åˆ†ï¼‰ æ€§èƒ½æµ‹è¯•ï¼šåœ¨é«˜å¹¶å‘ä¸‹ã€åŠ¨æ€åˆ‡æ¢çš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿçš„æ‰¿è½½èƒ½åŠ›ï¼Œæ ¹æ®æ‰€æœ‰å°ç»„çš„æµ‹è¯•æƒ… å†µè¿›è¡Œå†…éƒ¨è¯„æ¯”å¾—åˆ†ï¼ˆ1åˆ†ï¼‰ ä¸ºäº†æ ‡å‡†åŒ–æµ‹è¯•ï¼Œä½ çš„ç³»ç»Ÿåœ¨è¿è¡Œä¸Šï¼Œéœ€è¦æ»¡è¶³ä¸€ä¸‹æ¡ä»¶ï¼š

1. æ³¨æ„æ–‡ä»¶ç»“æž„ï¼Œä¸åŒæ¨¡å—æºä»£ç å¤„äºŽä¸åŒæ–‡ä»¶å¤¹ä¸ï¼ˆæˆ‘ä»¬ä¼šæ£€æŸ¥ä½ çš„æºä»£ç ï¼‰

2. é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹å¯ä»¥ä½¿ç”¨Â makeÂ å‘½ä»¤ç›´æŽ¥ç¼–è¯‘æ‰€æœ‰æ¨¡å—

3. å¯æ‰§è¡Œæ–‡ä»¶åˆ†ä¸º Web æœåŠ¡å™¨ å’Œ å˜å‚¨å™¨é›†ç¾¤ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå…¶ä¸

Web æœåŠ¡å™¨å¯æ‰§è¡Œæ–‡ä»¶ä¸ºÂ web-serverï¼Œæ”¯æŒÂ -ip,Â -port,Â -config_pathÂ ç‰å‘½ä»¤è¡Œå‚æ•°ï¼Œä¾‹å¦‚./web-

server –ip 127.0.0.1 –port 8080 –config_path ./conf/store_servers.conf å˜å‚¨å™¨ å¯æ‰§è¡Œæ–‡ä»¶ä¸ºÂ store-serverï¼Œæ”¯æŒÂ -config_pathÂ ç‰å‘½ä»¤è¡Œå‚æ•°ï¼Œå¹¶ä½¿ç”¨é…ç½®æ–

‡ä»¶Â coordinator.confÂ æˆ–Â participant.confÂ è¿›è¡Œé…ç½®ï¼Œå…·ä½“ç»†èŠ‚è¯·æŸ¥çœ‹Lab3ã€‚æµ‹è¯•ä¸ï¼Œæ¯ä¸ªé›†ç¾¤çš„å˜å‚¨æœåŠ¡å™¨æ•°é‡ä¸º 4ï¼Œ2pcå’Œraftä»»é€‰ä¸€ç§å®žçŽ°ï¼Œä¾‹å¦‚ï¼š

“`

å¯åŠ¨å˜å‚¨æœåŠ¡å™¨é›†ç¾¤1ï¼ˆè¯¥é›†ç¾¤ä¸»è¦å˜å‚¨ å¦ç”Ÿ-é€‰è¯¾ æ•°æ®ï¼‰ – 2pc

$ ./store-server –config_path ./conf/coordinator1.conf $ ./store-server –config_path ./conf/participant101.conf $ ./store-server –config_path

./conf/participant102.conf $ ./store-server –config_path ./conf/participant103.conf

å¯åŠ¨å˜å‚¨æœåŠ¡å™¨é›†ç¾¤2ï¼ˆè¯¥é›†ç¾¤ä¸»è¦å˜å‚¨ è¯¾ç¨‹é€‰è¯¾äººæ•° æ•°æ®ï¼‰ – raft

$ ./store-server –config_path ./conf/store201.conf $ ./store-server –config_path ./conf/store202.conf $ ./store-server –config_path ./conf/store203.conf $

./store-server –config_path ./conf/store204.conf “`

å¦‚æžœä½ å®žçŽ°äº†Â Load Balancerï¼Œå…¶å¯æ‰§è¡Œæ–‡ä»¶è¯·å‘½åä¸ºÂ load-balancerï¼Œæ”¯æŒÂ -ip –port -web_config_path -store_config_path Â ç‰å‘½ä»¤è¡Œå‚æ•°ã€‚ä¾‹å¦‚

“`

å¯åŠ¨è´Ÿè½½å‡è¡¡å™¨

$ ./load-balancer –ip 127.0.0.1 –port 8080 –store_config_path ./conf/store_servers.conf –web_config_path ./conf/web_servers.conf

å¯åŠ¨webæœåŠ¡å™¨é›†ç¾¤

$ ./web-server01 –ip 127.0.0.1 –port 8081 –config_path ./conf/store_servers.conf $ ./web-server02 –ip 127.0.0.1 –port 8082 –config_path

./conf/store_servers.conf $ ./web-server02 –ip 127.0.0.1 –port 8083 –config_path ./conf/store_servers.conf $ ./web-server02 –ip 127.0.0.1 –port 8084

–config_path ./conf/store_servers.conf “` å¯æ‰§è¡Œæ–‡ä»¶ä¸Žé…ç½®æ–‡ä»¶çš„è¦æ±‚å¯ä»¥å‚è€ƒ Lab2, Lab 3ã€‚

4.æ¯æ¬¡è¿è¡Œç³»ç»Ÿï¼Œéƒ½å°†å…ˆå¯åŠ¨å¤šä¸ªå˜å‚¨å™¨é›†ç¾¤ä¸çš„æ¯ä¸ªå˜å‚¨æœåŠ¡å™¨ï¼ŒéšåŽå¯åŠ¨å¤šä¸ª Web æœåŠ¡å™¨ï¼Œæœ€åŽå†å¯åŠ¨ Load Balancerï¼ˆå¦‚æžœéœ€è¦ï¼‰ï¼Œè¯·ä¿è¯æ¯ä¸ªå¯æ‰§è¡Œæ–‡ä»¶éƒ½èƒ½æ£å¸¸è¿è¡Œã€‚ ç±»ä¼¼ä¹‹å‰çš„å®žéªŒï¼Œæˆ‘ä»¬æä¾›äº†æµ‹è¯•ç¨‹åºï¼Œè¯·ä»”ç»†é˜…è¯» Lab 4 å®žéªŒæ–‡æ¡£å’Œæµ‹è¯•ç¨‹åºæ–‡æ¡£åŽä½¿ç”¨ã€‚

6. Lab submission

å°†ä½ çš„ä»£ç æäº¤åˆ°Â /Lab4/Â æ–‡ä»¶å¤¹ï¼Œå¹¶ç¼–å†™Â MakefileÂ ç¡®ä¿å¯ä»¥ç›´æŽ¥ä½¿ç”¨Â makeÂ å‘½ä»¤ç¼– è¯‘æ‰€æœ‰éœ€è¦çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚

è€ƒè™‘åˆ°Â Lab 4Â å®žçŽ°å®Œæ•´ç³»ç»Ÿè¾ƒä¸ºå¤æ‚ï¼ŒéªŒæ”¶å¯èƒ½ä¼šå˜åœ¨é¢å¤–é—®é¢˜ï¼Œè¯·åœ¨æäº¤ä»£ç çš„åŒæ—¶ï¼Œç¼– å†™ä¸€ä»½Â intro.mdÂ ï¼Œå¹¶æ·»åŠ ä¸€äº›è¯´æ˜Žï¼Œå¦‚ï¼šå¦‚ä½•ç¼–è¯‘ï¼Œå¦‚ä½•è¿è¡Œä½ çš„ç¨‹åºï¼›æ˜¯å¦è¿ç”¨äº†å…¶ä»–ä¾èµ– åº“ï¼Œå¦‚ä½•å®‰è£…ä¾èµ–ï¼›å¦‚ä½•ç®¡ç†æ•°æ®åº“ï¼Œå®žçŽ°æ•°æ®åˆ†å—ç‰ã€‚

7. Grading standards

å®Œæˆæ‰€æœ‰ Basic ç‰ˆæœ¬çš„è¦æ±‚ï¼Œä½ å°†èŽ·å¾— 8 åˆ†ï¼› å®Œæˆæ‰€æœ‰ Advanced ç‰ˆæœ¬çš„è¦æ±‚ï¼Œä½ å°†èŽ·å¾— 10 åˆ†ã€‚ å¦‚æžœä½ æœ‰éƒ¨åˆ†åŠŸèƒ½æ²¡æœ‰å®žçŽ°ï¼Œå°†æ ¹æ®ä½ çš„å®Œæˆæƒ…å†µè¿›è¡Œç»†åŒ–æ‰“åˆ†ã€‚ æ¤åˆ†æ•°ä¸åŒ…å« Lab 3ï¼ŒLab 3 çš„åˆ†æ•°ä¼šæ ¹æ® Lab 4 å®Œæˆæƒ…å†µå¦å¤–èŽ·å¾—ã€‚
